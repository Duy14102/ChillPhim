import{B as A,X as D,r as h,u as H,j as e}from"./index-BdlML2nV.js";import{N as U,H as C}from"./HaveReview-5AALzc9R.js";import{L as P}from"./LandingMovie-DDHuDw_S.js";import{a as _}from"./axios-CCb-kr4I.js";import"./ToastUpdate-BRfQDHLy.js";function G({message:l}){A.success(l,{isLoading:!1,position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"dark",transition:D})}var v={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_330b54f9-d77e-4266-a825-c9b5aaec2e1c",STATS_TRP:"true",DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",USER:"runner",npm_config_user_agent:"npm/10.7.0 node/v18.20.4 linux x64 workspaces/false ci/github-actions",CI:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_330b54f9-d77e-4266-a825-c9b5aaec2e1c",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/usr/local/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/ChillPhim/ChillPhim/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"Duy14102",GRADLE_HOME:"/usr/share/gradle-8.10.2",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/27.1.12297006",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",STATS_RDCL:"true",GITHUB_RETENTION_DAYS:"90",GITHUB_REPOSITORY_OWNER_ID:"90895096",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu22",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_userconfig:"/home/runner/.npmrc",npm_config_local_prefix:"/home/runner/work/ChillPhim/ChillPhim",SYSTEMD_EXEC_PID:"602",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",NVM_DIR:"/home/runner/.nvm",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",GOROOT_1_21_X64:"/opt/hostedtoolcache/go/1.21.13/x64",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20241015.1.0",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.8/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",RUNNER_USER:"runner",STATS_V3PS:"true",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.2/x64",JOURNAL_STREAM:"8:19819",GITHUB_WORKFLOW:"Deploy",_:"/usr/local/bin/npm",npm_config_prefix:"/usr/local",npm_config_npm_version:"10.7.0",npm_config_cache:"/home/runner/.npm",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",STATS_D:"true",GITHUB_RUN_ID:"11426902236",STATS_VMFE:"true",GITHUB_REF_TYPE:"branch",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"c429bcad9697c06e03dfedca26e42546443b347e",GITHUB_BASE_REF:"",ImageOS:"ubuntu22",STATS_BLT:"true",GITHUB_WORKFLOW_REF:"Duy14102/ChillPhim/.github/workflows/deploy.yml@refs/heads/main",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GITHUB_ACTION_REPOSITORY:"",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/ChillPhim/ChillPhim/node_modules/.bin:/home/runner/work/ChillPhim/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_87673b24-2932-44d2-a473-0478a4b56926",INVOCATION_ID:"2314254bd6be46a5bb37ca1fb26ba3bc",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",NODE:"/usr/local/bin/node",npm_package_name:"chillphim",GITHUB_ACTION:"__run",GITHUB_RUN_NUMBER:"5",GITHUB_TRIGGERING_ACTOR:"Duy14102",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 7",XDG_CONFIG_HOME:"/home/runner/.config",STATS_VMD:"true",GITHUB_REF_NAME:"main",GITHUB_REPOSITORY:"Duy14102/ChillPhim",STATS_D_D:"true",npm_lifecycle_script:"vite build",STATS_UE:"true",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.1.12297006",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",GITHUB_REPOSITORY_ID:"868080583",GITHUB_ACTIONS:"true",npm_package_version:"0.0.0",npm_lifecycle_event:"build",GITHUB_REF_PROTECTED:"false",GITHUB_WORKSPACE:"/home/runner/work/ChillPhim/ChillPhim",ACCEPT_EULA:"Y",GITHUB_JOB:"build",RUNNER_PERFLOG:"/home/runner/perflog",GITHUB_SHA:"c429bcad9697c06e03dfedca26e42546443b347e",GITHUB_RUN_ATTEMPT:"1",GITHUB_REF:"refs/heads/main",GITHUB_ACTOR:"Duy14102",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",LEIN_HOME:"/usr/local/lib/lein",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_330b54f9-d77e-4266-a825-c9b5aaec2e1c",JAVA_HOME:"/usr/lib/jvm/temurin-11-jdk-amd64",PWD:"/home/runner/work/ChillPhim/ChillPhim",GITHUB_ACTOR_ID:"90895096",RUNNER_WORKSPACE:"/home/runner/work/ChillPhim",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"push",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",LEIN_JAR:"/usr/local/lib/lein/self-installs/leiningen-2.11.2-standalone.jar",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_330b54f9-d77e-4266-a825-c9b5aaec2e1c",npm_config_global_prefix:"/usr/local",EDGEWEBDRIVER:"/usr/local/share/edge_driver",STATS_EXT:"true",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.1.12297006",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",STATS_EXTP:"https://provjobdsettingscdn.blob.core.windows.net/settings/provjobdsettings-latest/provjobd.data",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.1.12297006",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_330b54f9-d77e-4266-a825-c9b5aaec2e1c",INIT_CWD:"/home/runner/work/ChillPhim/ChillPhim",EDITOR:"vi",NODE_ENV:"production"};function x(){var E,p,T,N,R,I,g,b;const l=h.useRef(),r=H(),[n,a]=h.useReducer((o,i)=>({...o,...i}),{movies:null,similarMovies:null,light:!1,servers:0,wantChangeServer:!0});h.useEffect(()=>{l.current.scrollIntoView({behavior:"smooth"}),m()},[]);const f=o=>o?o.sort(()=>Math.random()-.5):[];function c(){const o={method:"post",url:`${v.REACT_APP_backendAPI}/api/v1/countMoviesView`,data:{subtitle:r.Name}};_(o).then(i=>{console.log(i.data.message)})}function m(){const o={method:"get",url:`${v.REACT_APP_backendAPI}/api/v1/getMoviesIn4`,params:{subtitle:r.Name,eps:r.Ep}};_(o).then(i=>{a({movies:i.data.movies,similarMovies:i.data.similarMovies});const t=JSON.parse(localStorage.getItem("MovieStorage"));if(t)if(t.filter(s=>s.title===r.Name).length===0){var u={title:r.Name,eps:r.Ep,time:Date.now()};t.push(u),localStorage.setItem("MovieStorage",JSON.stringify(t)),c()}else t.filter(s=>s.title===r.Name).map(s=>(new Date(s.time).getFullYear()<new Date(Date.now()).getFullYear()&&c(),s.eps!==r.Ep&&(s.eps=r.Ep),s.time=Date.now(),localStorage.setItem("MovieStorage",JSON.stringify(t)),null));else{var O=[],u={title:r.Name,eps:r.Ep,time:Date.now()};O.push(u),localStorage.setItem("MovieStorage",JSON.stringify(O)),c()}})}function d(){var o;return r.Ep.includes("Full")||parseInt(r.Ep.match(/\d/g).join(""))>=((o=n.movies)==null?void 0:o.filmSources.length)?r.Ep:`Tập ${parseInt(r.Ep.match(/\d/g).join(""))+1}`}function S(o){a({servers:o}),l.current.scrollIntoView({behavior:"smooth"}),G({message:"Đổi server thành công!"})}return e.jsxs("div",{style:{background:n.light?"black":null},className:"streaming",children:[e.jsxs("div",{className:"titleStreaming",children:[e.jsx("a",{href:`/Information/${(E=n.movies)==null?void 0:E.subtitle}`,className:"titleLinkStreaming",children:(p=n.movies)==null?void 0:p.title}),e.jsxs("div",{className:"botStreaming",children:[e.jsx("p",{children:r.Ep}),e.jsx("a",{href:`/Information/${(T=n.movies)==null?void 0:T.subtitle}`,className:"in4LinkStreaming",children:"ℹ️"})]})]}),e.jsxs("div",{ref:l,className:"videoStreaming",children:[e.jsx("iframe",{id:"myFrame",allowFullScreen:!0,src:(N=n.movies)==null?void 0:N.filmSources.filter(o=>o.title===r.Ep)[0].servers[n.servers]}),e.jsxs("button",{onClick:()=>a({wantChangeServer:!n.wantChangeServer}),type:"button",className:"chooseServers",children:[e.jsx("svg",{style:n.wantChangeServer?{rotate:"90deg"}:null,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:e.jsx("path",{d:"M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"})}),n.wantChangeServer?e.jsx("div",{className:"serverDropdown",children:(R=n.movies)==null?void 0:R.filmSources.filter(o=>o.title===r.Ep)[0].servers.map((o,i)=>e.jsxs("div",{style:n.servers===i?{background:"#94b1f2"}:null,onClick:()=>S(i),type:"button",className:"serverButton",children:["Server ",i+1]},i))}):null]})]}),e.jsxs("div",{style:{background:n.light?"black":null},className:"buttonStreaming",children:[e.jsx("button",{className:"buttonDefault buttonIn4",href:`/Information/${r.Name}`,children:"⚠️"}),e.jsx("button",{onClick:()=>a({light:!n.light}),className:"buttonDefault buttonLight",type:"button",children:n.light?"Bật đèn":"Tắt đèn"}),e.jsx("a",{style:{pointerEvents:d()===r.Ep?"none":null},href:`/Streaming/${r.Name}/${d()}`,className:"buttonDefault buttonPrevNext",type:"button",children:"Tập tiếp ►"})]}),e.jsxs("div",{style:{opacity:n.light?0:null},className:"episodeStreaming",children:[e.jsx("h2",{children:"Danh sách tập"}),e.jsx("div",{className:"episodeCover",children:(I=n.movies)==null?void 0:I.filmSources.map(o=>e.jsx("a",{style:o.title===r.Ep?{color:"#fff",background:"#94b1f2"}:null,href:`/Streaming/${r.Name}/${o.title}`,className:"buttonEp",children:o.title},o.title))})]}),e.jsxs("div",{style:{opacity:n.light?0:null},className:"rateStreaming",children:[e.jsxs("h2",{children:["💬 Bình luận ",e.jsxs("span",{style:{color:"#fff"},children:["(",(g=n.movies)==null?void 0:g.comments.length,")"]})]}),e.jsx("div",{className:"rateCover",children:((b=n.movies)==null?void 0:b.comments.length)<1?e.jsx(U,{movies:n.movies,axios:_,callBack:m}):e.jsx(C,{movies:n.movies,axios:_,callBack:m})})]}),e.jsx("div",{style:{opacity:n.light?0:null},children:e.jsx(P,{Title:"Phim tương tự",MarginTop:window.innerWidth<=991?50:100,movie:f(n==null?void 0:n.similarMovies)})})]})}export{x as default};
