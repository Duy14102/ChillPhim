import{B as S,X as D,r as h,u as C,j as e}from"./index-GFUcRS3m.js";import{N as P,H}from"./HaveReview-C6sJyKGU.js";import{L as U}from"./LandingMovie-BtujyN_u.js";import{a as _}from"./axios-CCb-kr4I.js";import"./ToastUpdate-DQUvUUkD.js";function M({message:t}){S.success(t,{isLoading:!1,position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"dark",transition:D})}var f={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_3ee8e472-9603-4bd9-a2d7-f3a0860910de",STATS_TRP:"true",DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",USER:"runner",npm_config_user_agent:"npm/10.7.0 node/v18.20.4 linux x64 workspaces/false ci/github-actions",CI:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_3ee8e472-9603-4bd9-a2d7-f3a0860910de",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/usr/local/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/ChillPhim/ChillPhim/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"Duy14102",GRADLE_HOME:"/usr/share/gradle-8.10.2",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/27.1.12297006",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",STATS_RDCL:"true",GITHUB_RETENTION_DAYS:"90",GITHUB_REPOSITORY_OWNER_ID:"90895096",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu22",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_userconfig:"/home/runner/.npmrc",npm_config_local_prefix:"/home/runner/work/ChillPhim/ChillPhim",SYSTEMD_EXEC_PID:"607",REACT_APP_THEMOVIEDBAPIKEY:"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjODUwOTdiMzEwM2NiYWQxNjUxYjRhMDk3MzY3ZTIwYiIsIm5iZiI6MTcyODM4NDE4My4xMDI1NzgsInN1YiI6IjY3MDUwYmZkNWFlMDFkMDkwZTFkNDZkOSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.lKZ_DBIwf0DRhLwmiC1g1lJvhBrR11TMqxZWGbOCZro",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",NVM_DIR:"/home/runner/.nvm",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",GOROOT_1_21_X64:"/opt/hostedtoolcache/go/1.21.13/x64",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20241015.1.0",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.8/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",RUNNER_USER:"runner",STATS_V3PS:"true",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.2/x64",JOURNAL_STREAM:"8:17337",GITHUB_WORKFLOW:"Deploy",_:"/usr/local/bin/npm",npm_config_prefix:"/usr/local",npm_config_npm_version:"10.7.0",npm_config_cache:"/home/runner/.npm",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",STATS_D:"true",GITHUB_RUN_ID:"11427406055",STATS_VMFE:"true",GITHUB_REF_TYPE:"branch",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"b044e063e8d6dc135c9ab6c2af7e445304dade4e",GITHUB_BASE_REF:"",ImageOS:"ubuntu22",STATS_BLT:"true",GITHUB_WORKFLOW_REF:"Duy14102/ChillPhim/.github/workflows/deploy.yml@refs/heads/main",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GITHUB_ACTION_REPOSITORY:"",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/ChillPhim/ChillPhim/node_modules/.bin:/home/runner/work/ChillPhim/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_a5c77d1e-9fd6-4899-8f0e-55063eb55bb9",INVOCATION_ID:"77870899342641c880bf40aa085b5f9d",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",NODE:"/usr/local/bin/node",npm_package_name:"chillphim",GITHUB_ACTION:"__run",GITHUB_RUN_NUMBER:"9",GITHUB_TRIGGERING_ACTOR:"Duy14102",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 1",XDG_CONFIG_HOME:"/home/runner/.config",STATS_VMD:"true",GITHUB_REF_NAME:"main",GITHUB_REPOSITORY:"Duy14102/ChillPhim",STATS_D_D:"true",npm_lifecycle_script:"vite build",STATS_UE:"true",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.1.12297006",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",GITHUB_REPOSITORY_ID:"868080583",GITHUB_ACTIONS:"true",npm_package_version:"0.0.0",npm_lifecycle_event:"build",GITHUB_REF_PROTECTED:"false",GITHUB_WORKSPACE:"/home/runner/work/ChillPhim/ChillPhim",ACCEPT_EULA:"Y",GITHUB_JOB:"build",RUNNER_PERFLOG:"/home/runner/perflog",GITHUB_SHA:"b044e063e8d6dc135c9ab6c2af7e445304dade4e",GITHUB_RUN_ATTEMPT:"1",GITHUB_REF:"refs/heads/main",GITHUB_ACTOR:"Duy14102",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",REACT_APP_BACKENDAPI:"https://chillphim.onrender.com",LEIN_HOME:"/usr/local/lib/lein",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_3ee8e472-9603-4bd9-a2d7-f3a0860910de",JAVA_HOME:"/usr/lib/jvm/temurin-11-jdk-amd64",PWD:"/home/runner/work/ChillPhim/ChillPhim",GITHUB_ACTOR_ID:"90895096",RUNNER_WORKSPACE:"/home/runner/work/ChillPhim",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"push",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",LEIN_JAR:"/usr/local/lib/lein/self-installs/leiningen-2.11.2-standalone.jar",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_3ee8e472-9603-4bd9-a2d7-f3a0860910de",npm_config_global_prefix:"/usr/local",EDGEWEBDRIVER:"/usr/local/share/edge_driver",STATS_EXT:"true",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.1.12297006",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",STATS_EXTP:"https://provjobdsettingscdn.blob.core.windows.net/settings/provjobdsettings-latest/provjobd.data",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.1.12297006",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_3ee8e472-9603-4bd9-a2d7-f3a0860910de",INIT_CWD:"/home/runner/work/ChillPhim/ChillPhim",EDITOR:"vi",NODE_ENV:"production"};function x(){var E,p,T,I,N,R,g,O;const t=h.useRef(),i=C(),[n,a]=h.useReducer((r,o)=>({...r,...o}),{movies:null,similarMovies:null,light:!1,servers:0,wantChangeServer:!0});h.useEffect(()=>{t.current.scrollIntoView({behavior:"smooth"}),u()},[]);const v=r=>r?r.sort(()=>Math.random()-.5):[];function m(){const r={method:"post",url:`${f.REACT_APP_BACKENDAPI}/api/v1/countMoviesView`,data:{subtitle:i.Name}};_(r).then(o=>{console.log(o.data.message)})}function u(){const r={method:"get",url:`${f.REACT_APP_BACKENDAPI}/api/v1/getMoviesIn4`,params:{subtitle:i.Name,eps:i.Ep}};_(r).then(o=>{a({movies:o.data.movies,similarMovies:o.data.similarMovies});const l=JSON.parse(localStorage.getItem("MovieStorage"));if(l)if(l.filter(s=>s.title===i.Name).length===0){var c={title:i.Name,eps:i.Ep,time:Date.now()};l.push(c),localStorage.setItem("MovieStorage",JSON.stringify(l)),m()}else l.filter(s=>s.title===i.Name).map(s=>(new Date(s.time).getFullYear()<new Date(Date.now()).getFullYear()&&m(),s.eps!==i.Ep&&(s.eps=i.Ep),s.time=Date.now(),localStorage.setItem("MovieStorage",JSON.stringify(l)),null));else{var b=[],c={title:i.Name,eps:i.Ep,time:Date.now()};b.push(c),localStorage.setItem("MovieStorage",JSON.stringify(b)),m()}})}function d(){var r;return i.Ep.includes("Full")||parseInt(i.Ep.match(/\d/g).join(""))>=((r=n.movies)==null?void 0:r.filmSources.length)?i.Ep:`Tập ${parseInt(i.Ep.match(/\d/g).join(""))+1}`}function A(r){a({servers:r}),t.current.scrollIntoView({behavior:"smooth"}),M({message:"Đổi server thành công!"})}return e.jsxs("div",{style:{background:n.light?"black":null},className:"streaming",children:[e.jsxs("div",{className:"titleStreaming",children:[e.jsx("a",{href:`/ChillPhim/Information/${(E=n.movies)==null?void 0:E.subtitle}`,className:"titleLinkStreaming",children:(p=n.movies)==null?void 0:p.title}),e.jsxs("div",{className:"botStreaming",children:[e.jsx("p",{children:i.Ep}),e.jsx("a",{href:`/ChillPhim/Information/${(T=n.movies)==null?void 0:T.subtitle}`,className:"in4LinkStreaming",children:"ℹ️"})]})]}),e.jsxs("div",{ref:t,className:"videoStreaming",children:[e.jsx("iframe",{id:"myFrame",allowFullScreen:!0,src:(I=n.movies)==null?void 0:I.filmSources.filter(r=>r.title===i.Ep)[0].servers[n.servers]}),e.jsxs("button",{onClick:()=>a({wantChangeServer:!n.wantChangeServer}),type:"button",className:"chooseServers",children:[e.jsx("svg",{style:n.wantChangeServer?{rotate:"90deg"}:null,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:e.jsx("path",{d:"M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"})}),n.wantChangeServer?e.jsx("div",{className:"serverDropdown",children:(N=n.movies)==null?void 0:N.filmSources.filter(r=>r.title===i.Ep)[0].servers.map((r,o)=>e.jsxs("div",{style:n.servers===o?{background:"#94b1f2"}:null,onClick:()=>A(o),type:"button",className:"serverButton",children:["Server ",o+1]},o))}):null]})]}),e.jsxs("div",{style:{background:n.light?"black":null},className:"buttonStreaming",children:[e.jsx("button",{className:"buttonDefault buttonIn4",href:`/ChillPhim/Information/${i.Name}`,children:"⚠️"}),e.jsx("button",{onClick:()=>a({light:!n.light}),className:"buttonDefault buttonLight",type:"button",children:n.light?"Bật đèn":"Tắt đèn"}),e.jsx("a",{style:{pointerEvents:d()===i.Ep?"none":null},href:`/ChillPhim/Streaming/${i.Name}/${d()}`,className:"buttonDefault buttonPrevNext",type:"button",children:"Tập tiếp ►"})]}),e.jsxs("div",{style:{opacity:n.light?0:null},className:"episodeStreaming",children:[e.jsx("h2",{children:"Danh sách tập"}),e.jsx("div",{className:"episodeCover",children:(R=n.movies)==null?void 0:R.filmSources.map(r=>e.jsx("a",{style:r.title===i.Ep?{color:"#fff",background:"#94b1f2"}:null,href:`/ChillPhim/Streaming/${i.Name}/${r.title}`,className:"buttonEp",children:r.title},r.title))})]}),e.jsxs("div",{style:{opacity:n.light?0:null},className:"rateStreaming",children:[e.jsxs("h2",{children:["💬 Bình luận ",e.jsxs("span",{style:{color:"#fff"},children:["(",(g=n.movies)==null?void 0:g.comments.length,")"]})]}),e.jsx("div",{className:"rateCover",children:((O=n.movies)==null?void 0:O.comments.length)<1?e.jsx(P,{movies:n.movies,axios:_,callBack:u}):e.jsx(H,{movies:n.movies,axios:_,callBack:u})})]}),e.jsx("div",{style:{opacity:n.light?0:null},children:e.jsx(U,{Title:"Phim tương tự",MarginTop:window.innerWidth<=991?50:100,movie:v(n==null?void 0:n.similarMovies)})})]})}export{x as default};
